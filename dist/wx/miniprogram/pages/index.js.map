{"version":3,"sources":["webpack:///./src/miniprogram/pages/index.mpx?d68c","webpack:///./src/miniprogram/pages/index.mpx","webpack:///./src/miniprogram/pages/index.mpx?bcfe","webpack:///./src/miniprogram/pages/index.mpx?3012","webpack:///./src/miniprogram/pages/index.mpx?a327"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACoI;;AAEpI;AACA,mBAAO,CAAC,GAAob;;AAE5b;AACA,mBAAO,CAAC,GAA6P;;AAErQ;AACA,mBAAO,CAAC,GAA0f;;;;;;;;;;;AC+BlgB;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA,eACA;AAAA;AAAA;AAAA,KADA,EAEA;AAAA;AAAA;AAAA,KAFA,EAGA;AAAA;AAAA;AAAA,KAHA;AADA,GADA;AAQA;AACA;AACA;AACA,KAHA;;AAIA;AACA;AACA;;AANA,GARA;AAgBA;AACA;AACA;AACA,mBADA;AAEA,0BAFA;;AAGA;AACA;AACA;AACA;AACA;;AAPA;AASA,KAXA;;AAYA;AACA;AACA,KAdA;;AAeA;AACA;AACA;AACA,mBADA;AAEA,2BAFA;;AAGA;AACA;AACA;AACA;AACA;;AAPA;AASA,KA1BA;;AA2BA;AACA;AACA;AACA,KA9BA;;AA+BA;AACA;AACA;AACA,2BADA;AAEA;AAFA;AAIA;AACA;;AACA;AACA,mBADA;AAEA,6BAFA;;AAGA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,kBAFA;AAGA,iCAHA;AAIA,mCAJA;AAKA,oBALA;;AAMA;AACA;AACA;AACA,8CADA;;AAEA;AACA;AACA,uCADA;AAEA;AAFA;AAIA;;AAPA;AASA;AACA;;AAlBA;AAoBA;AACA;;AA5BA;AA8BA;;AArEA,GAhBA;;AAuFA;AACA;AACA;AACA,GA1FA;;AA2FA;;AA3FA,G;;;;;;;AC7CA,uB;;;;;;;ACAA,uB;;;;;;;ACAA,uB","file":"pages/index.js","sourcesContent":["global.currentModuleId\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/@mpxjs/webpack-plugin/lib/selector?type=script&index=0!./index.mpx?isFirst=true\"\n\n/* styles */\nrequire(\"!!../../../node_modules/@mpxjs/webpack-plugin/lib/extractor?type=styles&index=0!../../../node_modules/@mpxjs/webpack-plugin/lib/wxss/loader?sourceMap&root=&importLoaders=1&extract=true!../../../node_modules/@mpxjs/webpack-plugin/lib/style-compiler/index?{\\\"moduleId\\\":\\\"maeb9a6fa\\\",\\\"scoped\\\":false,\\\"sourceMap\\\":true}!stylus-loader!../../../node_modules/@mpxjs/webpack-plugin/lib/selector?type=styles&index=0!./index.mpx?isFirst=true\")\n\n/* json */\nrequire(\"!!../../../node_modules/@mpxjs/webpack-plugin/lib/extractor?type=json&index=0!../../../node_modules/@mpxjs/webpack-plugin/lib/json-compiler/index?root=!../../../node_modules/@mpxjs/webpack-plugin/lib/selector?type=json&index=0!./index.mpx?isFirst=true\")\n\n/* template */\nrequire(\"!!../../../node_modules/@mpxjs/webpack-plugin/lib/extractor?type=template&index=0!../../../node_modules/@mpxjs/webpack-plugin/lib/wxml/wxml-loader?root=!../../../node_modules/@mpxjs/webpack-plugin/lib/template-compiler/index?{\\\"usingComponents\\\":[\\\"playboard\\\",\\\"menu-background\\\",\\\"menu-text\\\",\\\"menu-sticker\\\"],\\\"hasScoped\\\":false,\\\"isNative\\\":false,\\\"moduleId\\\":\\\"maeb9a6fa\\\",\\\"projectRoot\\\":\\\"\\\"}!../../../node_modules/@mpxjs/webpack-plugin/lib/selector?type=template&index=0!./index.mpx?isFirst=true\")\n\n","<template>\n  <view class=\"main\">\n    <playboard />\n    <view class=\"action\">\n      <view class=\"nav\">\n        <!-- 清除画布 -->\n        <view class=\"clear\" bindtap=\"clear\">\n          <text class=\"iconfont icon-clear\"></text>\n        </view>\n\n        <!-- 删除选中元素 -->\n        <view class=\"clear\" bindtap=\"delete\" wx:if=\"{{ activeIndex }}\">\n          <text class=\"iconfont icon-delete\"></text>\n        </view>\n\n        <view class=\"export\" wx:if=\"{{ activeIndex }}\" bindtap=\"confirm\">\n          <text class=\"iconfont icon-confirm\"></text>\n        </view>\n        <!-- 导出 -->\n        <view class=\"export\" wx:else bindtap=\"export\">\n          <text class=\"iconfont icon-download\"></text>\n        </view>\n      </view>\n      <view class=\"content\">\n        <menu-text wx:if=\"{{ mode === 'text' }}\" />\n        <menu-background wx:if=\"{{ mode === 'background' }}\" />\n        <menu-sticker wx:if=\"{{ mode === 'sticker' }}\" />\n      </view>\n      <view class=\"menu\">\n        <view\n          bindtap=\"switchMenu(item.code)\"\n          class=\"menu-item\"\n          wx:class=\"{{ { active: item.code === mode } }}\"\n          wx:for=\"{{menuData}}\"\n          wx:key=\"code\"\n        >{{item.name}}</view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { createPage } from '@mpxjs/core'\nimport store from '../store'\n\ncreatePage({\n  data: {\n    menuData: [\n      { name: '背景', code: 'background' },\n      { name: '文字', code: 'text' },\n      { name: '贴图', code: 'sticker' }\n    ]\n  },\n  computed: {\n    mode() {\n      return store.state.mode\n    },\n    activeIndex() {\n      return store.state.activeIndex\n    }\n  },\n  methods: {\n    delete() {\n      wx.showModal({\n        title: '提示',\n        content: '确认删除元素吗',\n        success(res) {\n          if (res.confirm) {\n            store.commit('deleteActiveELement')\n          }\n        }\n      })\n    },\n    confirm() {\n      store.commit('setActiveIndex', null)\n    },\n    clear() {\n      if (!store.state.elements.length) return\n      wx.showModal({\n        title: '提示',\n        content: '确定要清空画布吗',\n        success(res) {\n          if (res.confirm) {\n            store.commit('clear')\n          }\n        }\n      })\n    },\n    switchMenu(e) {\n      store.commit('setActiveIndex', null)\n      store.commit('setMode', e)\n    },\n    export() {\n      if (!store.state.elements.length) {\n        wx.showToast({\n          title: '加点东西再导出吧',\n          icon: 'none'\n        })\n        return\n      }\n      wx.showModal({\n        title: '提示',\n        content: '图片将保存到手机相册',\n        success(res) {\n          if (res.confirm) {\n            console.log('export-canvas', store.state.ctx)\n            const canvas = store.state.canvas\n            wx.canvasToTempFilePath({\n              x: 0,\n              y: 0,\n              width: canvas.width,\n              height: canvas.height,\n              canvas,\n              complete(res) {\n                if (res.errMsg === 'canvasToTempFilePath:ok') {\n                  wx.saveImageToPhotosAlbum({\n                    filePath: res.tempFilePath,\n                    success(res) {\n                      wx.showToast({\n                        title: '图片保存成功',\n                        icon: 'none'\n                      })\n                    }\n                  })\n                }\n              }\n            })\n          }\n        }\n      })\n    }\n  },\n  onLoad() {\n    console.log('app is ready')\n    wx.cloud.init()\n  },\n  onShareAppMessage() {}\n})\n</script>\n\n<style lang=\"stylus\">\n.main\n  height 100vh\n  width 100vw\n  position fixed\n  top 0\n  left 0\n\n.playboard\n  width 100vw\n  height 100vw\n  background #f8f8f8\n.action\n  width 100vw\n  height calc(100% - 100vw)\n  background white\n  position relative\n.nav\n  box-sizing border-box\n  padding 10rpx 10rpx 0 10rpx\n  display flex\n  justify-content space-between\n  .clear\n    text\n      font-size 28rpx\n      padding 0 20rpx\n      color #aaa\n      font-weight bold\n  .export\n    font-size 28rpx\n    color #aaa\n.content\n  height calc(100% - 160rpx)\n  padding 10rpx\n  position relative\n  overflow hidden\n.menu\n  display flex\n  justify-content space-around\n  border-top 1rpx solid #eee\n  line-height 100rpx\n  background white\n  .menu-item\n    color #666\n  .active\n    color #333\n    font-weight bold\n</style>\n\n<script type=\"application/json\">\n  {\n    \"navigationBarTitleText\": \"Face\",\n    \"usingComponents\": {\n      \"playboard\": \"../components/playboard\",\n      \"menu-background\": \"../components/menu-background\",\n      \"menu-text\": \"../components/menu-text\",\n      \"menu-sticker\": \"../components/menu-sticker\"\n    },\n    \"disableScroll\" : true\n  }\n</script>\n\n\n","// removed by extractor","// removed by extractor","// removed by extractor"],"sourceRoot":""}