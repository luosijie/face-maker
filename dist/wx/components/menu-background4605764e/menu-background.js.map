{"version":3,"sources":["webpack:///./src/components/menu-background.mpx?0061","webpack:///./src/components/menu-background.mpx","webpack:///./src/components/menu-background.mpx?03d1","webpack:///./src/components/menu-background.mpx?7ea9","webpack:///./src/components/menu-background.mpx?a7bb","webpack:///./node_modules/@babel/runtime-corejs3/core-js-stable/instance/find-index.js","webpack:///./node_modules/core-js-pure/stable/instance/find-index.js","webpack:///./node_modules/core-js-pure/es/instance/find-index.js","webpack:///./node_modules/core-js-pure/es/array/virtual/find-index.js","webpack:///./node_modules/core-js-pure/modules/es.array.find-index.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAC+I;;AAE/I;AACA,mBAAO,CAAC,GAAsb;;AAE9b;AACA,mBAAO,CAAC,GAAkQ;;AAE1Q;AACA,mBAAO,CAAC,GAA4b;;;;;;;;;;;;;;;;;;;;ACDpc;AACA;AAEA;AACA,UADA;AAEA;AACA;AACA;AACA,KAHA;;AAIA;AACA;AACA,KANA;;AAOA;AACA;AACA,KATA;;AAUA;AACA;AACA;;AAZA,GAFA;AAgBA;AACA;AAAA;;AACA;AACA,gBADA;AAEA,4CAFA;AAGA,uCAHA;AAIA;AACA;AACA;AACA;;AACA;;AACA;;AACA;AAAA;;AACA,iDADA,CAEA;;AACA;AACA;AACA;AACA,kCADA;AAEA,2BAFA;AAGA,uBAHA;AAIA,sBAJA;AAKA,wBALA;AAMA,yBANA;AAOA,wBAPA;AAQA;AARA;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAPA,MAOA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;;AACA;AAAA;AAAA;;AACA;AAAA;;AACA,gBAAgB,yGAAhB;AACA,eAFA,MAEA;AACA;AACA;AACA,aArCA;AAsCA;AACA;AAjDA;AAmDA;;AArDA,GAhBA;;AAuEA,WACA;AACA;;AAzEA,G;;;;;;;ACbA,uB;;;;;;;ACAA,uB;;;;;;;ACAA,uB;;;;;;;ACAA,iBAAiB,mBAAO,CAAC,GAAyC,E;;;;;;;ACAlE,aAAa,mBAAO,CAAC,GAA8B;;AAEnD;;;;;;;;ACFA,gBAAgB,mBAAO,CAAC,GAA6B;;AAErD;;AAEA;AACA;AACA;AACA;;;;;;;;ACPA,mBAAO,CAAC,GAAsC;AAC9C,mBAAmB,mBAAO,CAAC,GAAkC;;AAE7D;;;;;;;;;ACHa;AACb,QAAQ,mBAAO,CAAC,EAAqB;AACrC,iBAAiB,mBAAO,CAAC,EAA8B;AACvD,uBAAuB,mBAAO,CAAC,EAAiC;AAChE,8BAA8B,mBAAO,CAAC,GAA0C;;AAEhF;AACA;;AAEA;;AAEA;AACA,wDAAwD,qBAAqB,EAAE;;AAE/E;AACA;AACA,GAAG,uEAAuE;AAC1E;AACA;AACA;AACA,CAAC;;AAED;AACA","file":"components/menu-background4605764e/menu-background.js","sourcesContent":["global.currentModuleId\n/* script */\nexport * from \"!!babel-loader!../../node_modules/@mpxjs/webpack-plugin/lib/selector?type=script&index=0!./menu-background.mpx?packageName=main\"\n\n/* styles */\nrequire(\"!!../../node_modules/@mpxjs/webpack-plugin/lib/extractor?type=styles&index=0!../../node_modules/@mpxjs/webpack-plugin/lib/wxss/loader?sourceMap&root=&importLoaders=1&extract=true!../../node_modules/@mpxjs/webpack-plugin/lib/style-compiler/index?{\\\"moduleId\\\":\\\"m911db922\\\",\\\"scoped\\\":false,\\\"sourceMap\\\":true}!stylus-loader!../../node_modules/@mpxjs/webpack-plugin/lib/selector?type=styles&index=0!./menu-background.mpx?packageName=main\")\n\n/* json */\nrequire(\"!!../../node_modules/@mpxjs/webpack-plugin/lib/extractor?type=json&index=0!../../node_modules/@mpxjs/webpack-plugin/lib/json-compiler/index?root=!../../node_modules/@mpxjs/webpack-plugin/lib/selector?type=json&index=0!./menu-background.mpx?packageName=main\")\n\n/* template */\nrequire(\"!!../../node_modules/@mpxjs/webpack-plugin/lib/extractor?type=template&index=0!../../node_modules/@mpxjs/webpack-plugin/lib/wxml/wxml-loader?root=!../../node_modules/@mpxjs/webpack-plugin/lib/template-compiler/index?{\\\"usingComponents\\\":[],\\\"hasScoped\\\":false,\\\"isNative\\\":false,\\\"moduleId\\\":\\\"m911db922\\\",\\\"projectRoot\\\":\\\"\\\"}!../../node_modules/@mpxjs/webpack-plugin/lib/selector?type=template&index=0!./menu-background.mpx?packageName=main\")\n\n","<template>\n  <view class=\"menu-background\">\n    <view class=\"item replace\" bindtap=\"chooseImage\">\n      <i class=\"iconfont icon-image\"></i>\n      <text>替换图片</text>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { createComponent } from '@mpxjs/core'\nimport store from '../store'\n\ncreateComponent({\n  data: {},\n  computed: {\n    canvas() {\n      return store.state.canvas\n    },\n    ctx() {\n      return store.state.ctx\n    },\n    elements() {\n      return store.state.elements\n    },\n    dpr() {\n      return wx.getSystemInfoSync().pixelRatio\n    }\n  },\n  methods: {\n    chooseImage() {\n      wx.chooseImage({\n        count: 1,\n        sizeType: ['original', 'compressed'],\n        sourceType: ['album', 'camera'],\n        success: res => {\n          if (res.errMsg === 'chooseImage:ok') {\n            const path = res.tempFilePaths[0]\n            console.log('image from chooseImage', path)\n            const image = this.canvas.createImage()\n            image.src = path\n            image.onload = e => {\n              console.log('imageData-loaded', e)\n              // ctx.drawImage(res.path, 0, 0, 100, 100)\n              const cWidth = this.canvas.width / this.dpr\n              const cHeight = this.canvas.height / this.dpr\n              const data = {\n                type: 'background',\n                data: image,\n                left: 0,\n                top: 0,\n                width: 0,\n                height: 0,\n                scale: 1,\n                rotate: 0\n              }\n              if (image.height > image.width) {\n                // 图片高大于宽\n                const rate = image.height / cHeight\n                data.width = image.width / rate\n                data.height = cHeight\n                data.left = (cWidth - data.width) / 2\n                data.top = 0\n              } else {\n                // 图片宽大于高\n                const rate = image.width / cWidth\n                data.height = image.height / rate\n                data.width = cWidth\n                data.left = 0\n                data.top = (cHeight - data.height) / 2\n              }\n              console.log('new background', data)\n              const index = this.elements.findIndex(e => e.type === 'background')\n              if (index > -1) {\n                this.elements.splice(index, 1, data)\n              } else {\n                this.elements.unshift(data)\n              }\n            }\n          }\n        }\n      })\n    }\n  },\n  ready() {\n    // this.initCanvas()\n  }\n})\n</script>\n\n<style lang=\"stylus\">\n@import url('../assets/iconfont/iconfont.css')\n\n.menu-background\n  display flex\n  justify-content center\n  align-items center\n  height 100%\n  position relative\n  padding 20rpx\n  .item\n    color #666\n    font-size 28rpx\n    margin 10rpx\n  .replace\n    display flex\n    flex-direction column\n    align-items center\n    color #999\n    i\n      font-size 80rpx\n    text\n      font-size 20rpx\n</style>\n\n<script type=\"application/json\">\n  {\n    \"component\": true\n  }\n</script>\n","// removed by extractor","// removed by extractor","// removed by extractor","module.exports = require(\"core-js-pure/stable/instance/find-index\");","var parent = require('../../es/instance/find-index');\n\nmodule.exports = parent;\n","var findIndex = require('../array/virtual/find-index');\n\nvar ArrayPrototype = Array.prototype;\n\nmodule.exports = function (it) {\n  var own = it.findIndex;\n  return it === ArrayPrototype || (it instanceof Array && own === ArrayPrototype.findIndex) ? findIndex : own;\n};\n","require('../../../modules/es.array.find-index');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('Array').findIndex;\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND_INDEX);\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n"],"sourceRoot":""}